# å³é”®èœå•åŠŸèƒ½è¯´æ˜

## âœ¨ åŠŸèƒ½æ¦‚è¿°

åœ¨"ç‰¹å¾å³°åˆ†æ"é¡µé¢ä¸­ï¼Œæ–°å¢äº†**å³é”®èœå•åŠŸèƒ½**ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡å³é”®ç‚¹å‡»å¿«é€Ÿåˆ é™¤å³°åˆ†æè®°å½•æˆ–å–æ¶ˆåŒºé—´é€‰æ‹©ã€‚

---

## ğŸ¯ åŠŸèƒ½è¯¦æƒ…

### 1. **å³°åˆ†æç»“æœåˆ—è¡¨çš„å³é”®åˆ é™¤åŠŸèƒ½**

#### ä½ç½®
- å³°åˆ†æç»“æœåˆ—è¡¨ï¼ˆresult_treeï¼‰
- æ˜¾ç¤ºå³°ç¼–å·ã€æ–‡ä»¶åã€æ³¢æ•°èŒƒå›´ã€å³°æ•°é‡ã€ç§¯åˆ†é¢ç§¯ç­‰ä¿¡æ¯çš„è¡¨æ ¼

#### ä½¿ç”¨æ–¹æ³•
1. åœ¨å³°åˆ†æç»“æœåˆ—è¡¨ä¸­ï¼Œå³é”®ç‚¹å‡»ä»»æ„ä¸€è¡Œè®°å½•
2. å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"åˆ é™¤æ­¤è®°å½•"é€‰é¡¹
3. ç‚¹å‡»"åˆ é™¤æ­¤è®°å½•"
4. å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼Œæ˜¾ç¤ºè¦åˆ é™¤çš„è®°å½•è¯¦æƒ…
5. ç‚¹å‡»"æ˜¯"ç¡®è®¤åˆ é™¤

#### åŠŸèƒ½è¡Œä¸º
- âœ… ä»ç»“æœåˆ—è¡¨ä¸­ç§»é™¤è¯¥æ¡å³°åˆ†æè®°å½•
- âœ… ä» `analyzed_ranges` ä¸­ç§»é™¤å¯¹åº”çš„åŒºé—´æ•°æ®
- âœ… ä»å›¾å½¢ä¸­ç§»é™¤å¯¹åº”çš„åŒºé—´æ ‡è®°ï¼ˆç»¿è‰²è™šçº¿å’Œå³°ç¼–å·æ ‡æ³¨ï¼‰
- âœ… è‡ªåŠ¨é‡æ–°ç»˜åˆ¶å›¾å½¢
- âœ… åœ¨æ—¥å¿—ä¸­è®°å½•åˆ é™¤æ“ä½œ

#### ç¡®è®¤å¯¹è¯æ¡†ç¤ºä¾‹
```
ç¡®å®šè¦åˆ é™¤ä»¥ä¸‹è®°å½•å—ï¼Ÿ

æ–‡ä»¶å: 20251118-3%å¤å­£-1
å³°ç¼–å·: 3
åŒºé—´: 605.54 - 650.00
```

---

### 2. **å›¾å½¢åŒºåŸŸçš„å³é”®åˆ é™¤/å–æ¶ˆåŠŸèƒ½**

#### ä½ç½®
- ç‰¹å¾å³°åˆ†æé¡µé¢çš„å›¾å½¢åŒºåŸŸï¼ˆpeak_axï¼‰

#### ä½¿ç”¨æ–¹æ³•

##### åœºæ™¯1ï¼šåˆ é™¤å·²åˆ†æçš„åŒºé—´
1. åœ¨å›¾å½¢ä¸­ï¼Œå³é”®ç‚¹å‡»æŸä¸ªå·²æ ‡è®°çš„å³°åˆ†æåŒºé—´ï¼ˆå¸¦ç»¿è‰²è™šçº¿å’Œå³°ç¼–å·çš„åŒºåŸŸï¼‰
2. å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"åˆ é™¤åŒºé—´åˆ†æ (å³°#X)"é€‰é¡¹
3. ç‚¹å‡»åˆ é™¤é€‰é¡¹
4. å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
5. ç‚¹å‡»"æ˜¯"ç¡®è®¤åˆ é™¤

##### åœºæ™¯2ï¼šå–æ¶ˆå½“å‰é€‰æ‹©
1. åœ¨å›¾å½¢ä¸­ï¼Œå³é”®ç‚¹å‡»å½“å‰é€‰æ‹©çš„åŒºé—´ï¼ˆå·²è®¾ç½®ä¸Šä¸‹é™ä½†æœªæ·»åŠ åˆ°åˆ†æåˆ—è¡¨ï¼‰
2. å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"å–æ¶ˆé€‰æ‹©"é€‰é¡¹
3. ç‚¹å‡»"å–æ¶ˆé€‰æ‹©"
4. æ¸…é™¤å½“å‰çš„åŒºé—´é€‰æ‹©ï¼ˆä¸Šä¸‹é™è¾“å…¥æ¡†æ¸…ç©ºï¼‰

##### åœºæ™¯3ï¼šæ— å¯ç”¨æ“ä½œ
1. åœ¨å›¾å½¢ä¸­ï¼Œå³é”®ç‚¹å‡»ç©ºç™½åŒºåŸŸï¼ˆä¸åœ¨ä»»ä½•åŒºé—´å†…ï¼‰
2. å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"(æ— å¯ç”¨æ“ä½œ)"ï¼ˆç°è‰²ï¼Œä¸å¯ç‚¹å‡»ï¼‰

#### åŠŸèƒ½è¡Œä¸º

**åˆ é™¤åŒºé—´åˆ†æ**ï¼š
- âœ… ä» `analyzed_ranges` ä¸­ç§»é™¤è¯¥åŒºé—´
- âœ… ä»ç»“æœåˆ—è¡¨ä¸­ç§»é™¤å¯¹åº”çš„è®°å½•
- âœ… ä»å›¾å½¢ä¸­ç§»é™¤åŒºé—´æ ‡è®°
- âœ… è‡ªåŠ¨é‡æ–°ç»˜åˆ¶å›¾å½¢
- âœ… åœ¨æ—¥å¿—ä¸­è®°å½•åˆ é™¤æ“ä½œ

**å–æ¶ˆé€‰æ‹©**ï¼š
- âœ… æ¸…ç©ºä¸Šä¸‹é™è¾“å…¥æ¡†
- âœ… æ¸…é™¤å³°åˆ—è¡¨çš„é€‰æ‹©
- âœ… ä¸å½±å“å·²æœ‰çš„åˆ†æç»“æœ

---

## ğŸ“ å®ç°ç»†èŠ‚

### ä»£ç ä¿®æ”¹

#### 0. **ä¿®å¤å›¾å½¢æ®‹ç•™é—®é¢˜**ï¼ˆç¬¬ 2440-2623 è¡Œï¼‰

**é—®é¢˜**ï¼š
- åˆ é™¤å³°åˆ†æè®°å½•åï¼Œå›¾å½¢ä¸Šä»ç„¶æ®‹ç•™æœ‰é«˜äº®åŒºåŸŸ
- `SpanSelector` widget åœ¨ `clear()` åå¯èƒ½ç•™ä¸‹æ®‹ç•™

**ä¿®å¤æ–¹æ¡ˆ**ï¼š
```python
# åœ¨ update_peak_plot() ä¸­ï¼ˆç¬¬ 2440-2451 è¡Œï¼‰
# æ¸…ç©ºåæ ‡è½´
self.peak_ax.clear()

# å¦‚æœå­˜åœ¨ SpanSelectorï¼Œéœ€è¦é‡æ–°åˆ›å»ºï¼ˆå› ä¸º clear() ä¼šç§»é™¤å®ƒï¼‰
need_recreate_span_selector = False
if hasattr(self, 'peak_span_selector') and self.peak_span_selector is not None:
    if self.peak_interactive_mode:
        need_recreate_span_selector = True
    # å…ˆç§»é™¤æ—§çš„ SpanSelector
    self.peak_span_selector.set_active(False)
    self.peak_span_selector = None
```

```python
# åœ¨ update_peak_plot() æœ«å°¾ï¼ˆç¬¬ 2606-2623 è¡Œï¼‰
# å¦‚æœéœ€è¦é‡æ–°åˆ›å»º SpanSelector
if need_recreate_span_selector:
    from matplotlib.widgets import SpanSelector
    self.peak_span_selector = SpanSelector(
        self.peak_ax,
        self.on_peak_span_select,
        'horizontal',
        useblit=True,
        props=dict(alpha=0.3, facecolor='yellow'),
        interactive=True,
        drag_from_anywhere=True
    )
    logger.info("update_peak_plot: é‡æ–°åˆ›å»ºäº† SpanSelector")
```

**æ•ˆæœ**ï¼š
- âœ… ç¡®ä¿ `clear()` å®Œå…¨æ¸…é™¤æ‰€æœ‰å›¾å½¢å…ƒç´ 
- âœ… æ­£ç¡®å¤„ç† `SpanSelector` çš„é‡æ–°åˆ›å»º
- âœ… åˆ é™¤æ“ä½œåå›¾å½¢å®Œå…¨åˆ·æ–°ï¼Œæ— æ®‹ç•™

---

#### 1. **ä¸º result_tree ç»‘å®šå³é”®ç‚¹å‡»äº‹ä»¶**ï¼ˆç¬¬ 2234-2235 è¡Œï¼‰
```python
# ç»‘å®šå³é”®ç‚¹å‡»äº‹ä»¶ï¼Œç”¨äºæ˜¾ç¤ºåˆ é™¤èœå•
self.result_tree.bind('<Button-3>', self.on_result_tree_right_click)
```

#### 2. **ä¿®æ”¹ on_peak_button_press å‡½æ•°**ï¼ˆç¬¬ 2903-2929 è¡Œï¼‰
```python
def on_peak_button_press(self, event):
    """
    é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶å¤„ç† - å¼€å§‹å¹³ç§»æˆ–æ˜¾ç¤ºå³é”®èœå•
    """
    if event.inaxes != self.peak_ax:
        return

    # å¤„ç†å³é”®ç‚¹å‡»ï¼ˆæ˜¾ç¤ºå³é”®èœå•ï¼‰
    if event.button == 3:  # å³é”®
        self.on_peak_plot_right_click(event)
        return
    
    # ... åŸæœ‰çš„å·¦é”®å¤„ç†é€»è¾‘
```

#### 3. **æ–°å¢ on_result_tree_right_click å‡½æ•°**ï¼ˆç¬¬ 4111-4137 è¡Œï¼‰
```python
def on_result_tree_right_click(self, event):
    """
    å¤„ç†å³°åˆ†æç»“æœåˆ—è¡¨çš„å³é”®ç‚¹å‡»äº‹ä»¶
    """
    # è·å–ç‚¹å‡»ä½ç½®çš„è¡Œ
    item = self.result_tree.identify_row(event.y)
    
    if not item:
        return
    
    # é€‰ä¸­è¯¥è¡Œ
    self.result_tree.selection_set(item)
    
    # åˆ›å»ºå³é”®èœå•
    context_menu = tk.Menu(self.result_tree, tearoff=0)
    context_menu.add_command(label="åˆ é™¤æ­¤è®°å½•", command=lambda: self.delete_result_record(item))
    
    # æ˜¾ç¤ºèœå•
    try:
        context_menu.tk_popup(event.x_root, event.y_root)
    finally:
        context_menu.grab_release()
```

#### 4. **æ–°å¢ delete_result_record å‡½æ•°**ï¼ˆç¬¬ 4139-4182 è¡Œï¼‰
```python
def delete_result_record(self, item):
    """
    åˆ é™¤å³°åˆ†æç»“æœåˆ—è¡¨ä¸­çš„æŒ‡å®šè®°å½•
    """
    # è·å–è®°å½•ä¿¡æ¯
    values = self.result_tree.item(item, 'values')
    
    # ç¡®è®¤åˆ é™¤
    if not messagebox.askyesno("ç¡®è®¤åˆ é™¤", ...):
        return
    
    # ä»ç»“æœåˆ—è¡¨ä¸­åˆ é™¤
    self.result_tree.delete(item)
    
    # ä» analyzed_ranges ä¸­åˆ é™¤å¯¹åº”çš„åŒºé—´
    self.analyzed_ranges = [
        (lower, upper, num) for lower, upper, num in self.analyzed_ranges
        if not (åŒ¹é…æ¡ä»¶)
    ]
    
    # é‡æ–°ç»˜åˆ¶å›¾å½¢
    self.update_peak_plot()
```

#### 5. **æ–°å¢ on_peak_plot_right_click å‡½æ•°**ï¼ˆç¬¬ 4184-4237 è¡Œï¼‰
```python
def on_peak_plot_right_click(self, event):
    """
    å¤„ç†å›¾å½¢åŒºåŸŸçš„å³é”®ç‚¹å‡»äº‹ä»¶
    """
    click_x = event.xdata
    
    # æ£€æŸ¥æ˜¯å¦ç‚¹å‡»åœ¨æŸä¸ªå·²åˆ†æçš„åŒºé—´å†…
    clicked_range = None
    for lower, upper, peak_number in self.analyzed_ranges:
        if min(lower, upper) <= click_x <= max(lower, upper):
            clicked_range = (lower, upper, peak_number)
            break
    
    # æ£€æŸ¥æ˜¯å¦æœ‰å½“å‰é€‰æ‹©çš„åŒºé—´
    has_current_selection = ...
    
    # åˆ›å»ºå³é”®èœå•
    context_menu = tk.Menu(...)
    
    if clicked_range:
        context_menu.add_command(label="åˆ é™¤åŒºé—´åˆ†æ (å³°#X)", ...)
    elif has_current_selection:
        context_menu.add_command(label="å–æ¶ˆé€‰æ‹©", ...)
    else:
        context_menu.add_command(label="(æ— å¯ç”¨æ“ä½œ)", state=tk.DISABLED)
    
    # æ˜¾ç¤ºèœå•
    context_menu.tk_popup(...)
```

#### 6. **æ–°å¢ delete_analyzed_range_from_plot å‡½æ•°**ï¼ˆç¬¬ 4239-4287 è¡Œï¼‰
```python
def delete_analyzed_range_from_plot(self, lower, upper, peak_number):
    """
    ä»å›¾å½¢ä¸­åˆ é™¤å·²åˆ†æçš„åŒºé—´
    """
    # ç¡®è®¤åˆ é™¤
    if not messagebox.askyesno("ç¡®è®¤åˆ é™¤", ...):
        return
    
    # ä» analyzed_ranges ä¸­åˆ é™¤
    self.analyzed_ranges = [...]
    
    # ä»ç»“æœåˆ—è¡¨ä¸­åˆ é™¤å¯¹åº”çš„è®°å½•
    for item in self.result_tree.get_children():
        if åŒ¹é…æ¡ä»¶:
            self.result_tree.delete(item)
            break
    
    # é‡æ–°ç»˜åˆ¶å›¾å½¢
    self.update_peak_plot()
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•1ï¼šç»“æœåˆ—è¡¨å³é”®åˆ é™¤

1. **å‡†å¤‡æ•°æ®**
   - å¯åŠ¨ç¨‹åºï¼Œåˆ‡æ¢åˆ°"ç‰¹å¾å³°åˆ†æ"é¡µé¢
   - åŠ è½½æ•°æ®é›†ï¼Œæ‰§è¡Œå¯»å³°
   - å¯¹å‡ ä¸ªå³°æ‰§è¡Œå³°åˆ†æï¼Œæ·»åŠ åˆ°ç»“æœåˆ—è¡¨

2. **æµ‹è¯•åˆ é™¤**
   - åœ¨ç»“æœåˆ—è¡¨ä¸­å³é”®ç‚¹å‡»æŸä¸€è¡Œ
   - éªŒè¯å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"åˆ é™¤æ­¤è®°å½•"
   - ç‚¹å‡»åˆ é™¤ï¼ŒéªŒè¯å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
   - ç‚¹å‡»"æ˜¯"ï¼ŒéªŒè¯è®°å½•è¢«åˆ é™¤

3. **éªŒè¯ç»“æœ**
   - âœ… ç»“æœåˆ—è¡¨ä¸­è¯¥è®°å½•å·²æ¶ˆå¤±
   - âœ… å›¾å½¢ä¸­å¯¹åº”çš„åŒºé—´æ ‡è®°å·²æ¶ˆå¤±
   - âœ… æ—¥å¿—ä¸­è®°å½•äº†åˆ é™¤æ“ä½œ

---

### æµ‹è¯•2ï¼šå›¾å½¢åŒºåŸŸå³é”®åˆ é™¤å·²åˆ†æåŒºé—´

1. **å‡†å¤‡æ•°æ®**
   - åœ¨ç»“æœåˆ—è¡¨ä¸­å·²æœ‰å‡ æ¡å³°åˆ†æè®°å½•
   - å›¾å½¢ä¸­æ˜¾ç¤ºç»¿è‰²è™šçº¿å’Œå³°ç¼–å·æ ‡æ³¨

2. **æµ‹è¯•åˆ é™¤**
   - åœ¨å›¾å½¢ä¸­ï¼Œå³é”®ç‚¹å‡»æŸä¸ªå·²æ ‡è®°çš„åŒºé—´
   - éªŒè¯å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"åˆ é™¤åŒºé—´åˆ†æ (å³°#X)"
   - ç‚¹å‡»åˆ é™¤ï¼ŒéªŒè¯å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†
   - ç‚¹å‡»"æ˜¯"ï¼ŒéªŒè¯åŒºé—´è¢«åˆ é™¤

3. **éªŒè¯ç»“æœ**
   - âœ… å›¾å½¢ä¸­è¯¥åŒºé—´çš„æ ‡è®°å·²æ¶ˆå¤±
   - âœ… ç»“æœåˆ—è¡¨ä¸­å¯¹åº”çš„è®°å½•å·²æ¶ˆå¤±
   - âœ… æ—¥å¿—ä¸­è®°å½•äº†åˆ é™¤æ“ä½œ

---

### æµ‹è¯•3ï¼šå›¾å½¢åŒºåŸŸå³é”®å–æ¶ˆé€‰æ‹©

1. **å‡†å¤‡æ•°æ®**
   - åœ¨å³°åˆ—è¡¨ä¸­é€‰ä¸­ä¸€ä¸ªå³°
   - åœ¨ä¸Šä¸‹é™è¾“å…¥æ¡†ä¸­è¾“å…¥åŒºé—´èŒƒå›´
   - å›¾å½¢ä¸­æ˜¾ç¤ºé»„è‰²é«˜äº®åŒºåŸŸï¼ˆä½†æœªæ·»åŠ åˆ°åˆ†æåˆ—è¡¨ï¼‰

2. **æµ‹è¯•å–æ¶ˆ**
   - åœ¨å›¾å½¢ä¸­ï¼Œå³é”®ç‚¹å‡»é»„è‰²é«˜äº®åŒºåŸŸ
   - éªŒè¯å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"å–æ¶ˆé€‰æ‹©"
   - ç‚¹å‡»"å–æ¶ˆé€‰æ‹©"

3. **éªŒè¯ç»“æœ**
   - âœ… ä¸Šä¸‹é™è¾“å…¥æ¡†å·²æ¸…ç©º
   - âœ… å³°åˆ—è¡¨çš„é€‰æ‹©å·²æ¸…é™¤
   - âœ… å›¾å½¢ä¸­é»„è‰²é«˜äº®åŒºåŸŸå·²æ¶ˆå¤±
   - âœ… å·²æœ‰çš„åˆ†æç»“æœä¸å—å½±å“

---

### æµ‹è¯•4ï¼šå›¾å½¢åŒºåŸŸå³é”®ç‚¹å‡»ç©ºç™½åŒºåŸŸ

1. **æµ‹è¯•**
   - åœ¨å›¾å½¢ä¸­ï¼Œå³é”®ç‚¹å‡»ç©ºç™½åŒºåŸŸï¼ˆä¸åœ¨ä»»ä½•åŒºé—´å†…ï¼‰
   - éªŒè¯å¼¹å‡ºå³é”®èœå•ï¼Œæ˜¾ç¤º"(æ— å¯ç”¨æ“ä½œ)"ï¼ˆç°è‰²ï¼‰

2. **éªŒè¯ç»“æœ**
   - âœ… èœå•é¡¹ä¸ºç°è‰²ï¼Œä¸å¯ç‚¹å‡»
   - âœ… ä¸å½±å“ä»»ä½•ç°æœ‰æ•°æ®

---

## ğŸ“Š æ—¥å¿—ç¤ºä¾‹

### åˆ é™¤ç»“æœåˆ—è¡¨ä¸­çš„è®°å½•
```
INFO - ä» analyzed_ranges åˆ é™¤åŒºé—´: åŸæœ‰5ä¸ªï¼Œç°æœ‰4ä¸ª
INFO - è°ƒç”¨ update_peak_plot() é‡æ–°ç»˜åˆ¶å›¾å½¢
INFO - update_peak_plot: å¼€å§‹æ›´æ–°å›¾å½¢ï¼Œæ€»æ•°æ®é›†æ•°: 1
INFO - update_peak_plot: å‹¾é€‰çš„æ•°æ®é›†æ•°é‡: 1
INFO - update_peak_plot: å›¾å½¢ç»˜åˆ¶å®Œæˆ
INFO - å·²åˆ é™¤å³°åˆ†æè®°å½•: æ–‡ä»¶=20251118-3%å¤å­£-1, å³°ç¼–å·=3, åŒºé—´=605.54-650.00
```

### ä»å›¾å½¢ä¸­åˆ é™¤åŒºé—´åˆ†æ
```
INFO - ä» analyzed_ranges åˆ é™¤åŒºé—´: åŸæœ‰4ä¸ªï¼Œç°æœ‰3ä¸ª
INFO - ä»ç»“æœåˆ—è¡¨åˆ é™¤è®°å½•: å³°#3
INFO - è°ƒç”¨ update_peak_plot() é‡æ–°ç»˜åˆ¶å›¾å½¢
INFO - update_peak_plot: å¼€å§‹æ›´æ–°å›¾å½¢ï¼Œæ€»æ•°æ®é›†æ•°: 1
INFO - update_peak_plot: å‹¾é€‰çš„æ•°æ®é›†æ•°é‡: 1
INFO - update_peak_plot: å›¾å½¢ç»˜åˆ¶å®Œæˆ
INFO - å·²ä»å›¾å½¢ä¸­åˆ é™¤åŒºé—´åˆ†æ: å³°ç¼–å·=3, åŒºé—´=605.54-650.00
```

### å–æ¶ˆé€‰æ‹©
```
INFO - å·²æ¸…é™¤å³°é€‰æ‹©å’Œåˆ†æèŒƒå›´
INFO - update_peak_plot: å¼€å§‹æ›´æ–°å›¾å½¢ï¼Œæ€»æ•°æ®é›†æ•°: 1
INFO - update_peak_plot: å‹¾é€‰çš„æ•°æ®é›†æ•°é‡: 1
INFO - update_peak_plot: å›¾å½¢ç»˜åˆ¶å®Œæˆ
```

### SpanSelector é‡æ–°åˆ›å»ºï¼ˆä¿®å¤å›¾å½¢æ®‹ç•™ï¼‰
```
INFO - update_peak_plot: å¼€å§‹æ›´æ–°å›¾å½¢ï¼Œæ€»æ•°æ®é›†æ•°: 1
INFO - update_peak_plot: å‹¾é€‰çš„æ•°æ®é›†æ•°é‡: 1
INFO - update_peak_plot: é‡æ–°åˆ›å»ºäº† SpanSelector
INFO - update_peak_plot: å›¾å½¢ç»˜åˆ¶å®Œæˆ
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. **åˆ é™¤æ“ä½œä¸å¯æ’¤é”€**
- åˆ é™¤åæ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œ
- åˆ é™¤å‰ä¼šå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼Œé¿å…è¯¯åˆ 

### 2. **åŒæ­¥åˆ é™¤**
- ä»ç»“æœåˆ—è¡¨åˆ é™¤è®°å½•æ—¶ï¼Œå›¾å½¢ä¸­çš„æ ‡è®°ä¹Ÿä¼šåŒæ­¥åˆ é™¤
- ä»å›¾å½¢åˆ é™¤åŒºé—´æ—¶ï¼Œç»“æœåˆ—è¡¨ä¸­çš„è®°å½•ä¹Ÿä¼šåŒæ­¥åˆ é™¤

### 3. **åŒºé—´è¯†åˆ«ç²¾åº¦**
- å›¾å½¢å³é”®èœå•ä½¿ç”¨ç‚¹å‡»ä½ç½®çš„ x åæ ‡åˆ¤æ–­æ˜¯å¦åœ¨åŒºé—´å†…
- ç²¾åº¦ä¸º 0.01ï¼Œè¶³å¤Ÿå‡†ç¡®è¯†åˆ«åŒºé—´

### 4. **è¾¹ç•Œæƒ…å†µå¤„ç†**
- å¦‚æœç»“æœåˆ—è¡¨ä¸ºç©ºï¼Œå³é”®ç‚¹å‡»æ— æ•ˆæœ
- å¦‚æœç‚¹å‡»ä½ç½®ä¸åœ¨ä»»ä½•åŒºé—´å†…ï¼Œæ˜¾ç¤º"(æ— å¯ç”¨æ“ä½œ)"

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šå³é”®èœå•æ²¡æœ‰å¼¹å‡º

**å¯èƒ½åŸå› **ï¼š
- ç‚¹å‡»ä½ç½®ä¸æ­£ç¡®
- ç»“æœåˆ—è¡¨ä¸ºç©º

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®ä¿ç‚¹å‡»åœ¨ç»“æœåˆ—è¡¨çš„è¡Œä¸Šæˆ–å›¾å½¢çš„åŒºé—´å†…
2. ç¡®ä¿å·²æœ‰å³°åˆ†æè®°å½•

### é—®é¢˜2ï¼šåˆ é™¤åå›¾å½¢æ²¡æœ‰æ›´æ–°

**å¯èƒ½åŸå› **ï¼š
- ç¨‹åºå†…éƒ¨é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. å°è¯•æ‰‹åŠ¨åˆ·æ–°å›¾å½¢ï¼ˆåˆ‡æ¢æ•°æ®ç±»å‹æˆ–é‡æ–°å¯»å³°ï¼‰

### é—®é¢˜3ï¼šåˆ é™¤ç¡®è®¤å¯¹è¯æ¡†æ²¡æœ‰æ˜¾ç¤º

**å¯èƒ½åŸå› **ï¼š
- å¯¹è¯æ¡†è¢«å…¶ä»–çª—å£é®æŒ¡

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ä»»åŠ¡æ æ˜¯å¦æœ‰é—ªçƒçš„çª—å£
2. æœ€å°åŒ–å…¶ä»–çª—å£

---

## ğŸ“ å½±å“èŒƒå›´

### ä¿®æ”¹çš„æ–‡ä»¶
- `FTIR_Processor.py`

### ä¿®æ”¹çš„å‡½æ•°
- `update_peak_plot()` - ä¿®å¤å›¾å½¢æ®‹ç•™é—®é¢˜ï¼Œæ­£ç¡®å¤„ç† SpanSelector
- `on_peak_button_press()` - æ·»åŠ å³é”®ç‚¹å‡»å¤„ç†
- `clear_peak_selection()` - æ·»åŠ æ—¥å¿—è®°å½•
- æ–°å¢ `on_result_tree_right_click()` - ç»“æœåˆ—è¡¨å³é”®èœå•
- æ–°å¢ `delete_result_record()` - åˆ é™¤ç»“æœè®°å½•ï¼ˆå¸¦è¯¦ç»†æ—¥å¿—ï¼‰
- æ–°å¢ `on_peak_plot_right_click()` - å›¾å½¢åŒºåŸŸå³é”®èœå•
- æ–°å¢ `delete_analyzed_range_from_plot()` - ä»å›¾å½¢åˆ é™¤åŒºé—´ï¼ˆå¸¦è¯¦ç»†æ—¥å¿—ï¼‰

### ä¸å—å½±å“çš„åŠŸèƒ½
- âœ… æ•°æ®åŠ è½½
- âœ… å¹³æ»‘å¤„ç†
- âœ… åŸºçº¿æ ¡æ­£
- âœ… å¯»å³°
- âœ… æ‰‹åŠ¨å³°åˆ†æ
- âœ… æ‰¹é‡å³°åˆ†æ
- âœ… æ•°æ®å¯¼å‡º
- âœ… æ—¥å¿—ç®¡ç†
- âœ… æ‰€æœ‰å…¶ä»–åŠŸèƒ½

---

## ğŸ¯ æ€»ç»“

**åŠŸèƒ½**ï¼šå³é”®èœå•åˆ é™¤å³°åˆ†æè®°å½•

**é€‚ç”¨åœºæ™¯**ï¼š
1. åˆ é™¤é”™è¯¯çš„å³°åˆ†æè®°å½•
2. åˆ é™¤ä¸éœ€è¦çš„åŒºé—´åˆ†æ
3. å–æ¶ˆå½“å‰çš„åŒºé—´é€‰æ‹©

**ä¼˜åŠ¿**ï¼š
- æ“ä½œä¾¿æ·ï¼Œå³é”®å³å¯åˆ é™¤
- åŒæ­¥åˆ é™¤ç»“æœåˆ—è¡¨å’Œå›¾å½¢æ ‡è®°
- æœ‰ç¡®è®¤å¯¹è¯æ¡†ï¼Œé¿å…è¯¯åˆ 
- æ‰€æœ‰æ“ä½œè®°å½•åœ¨æ—¥å¿—ä¸­

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- æ—¥å¿—æ–‡ä»¶ï¼š`logs/ftir_processor.log`
- é¡¹ç›®æ–‡æ¡£ï¼š`README.md`

